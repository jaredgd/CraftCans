usethis::use_mit_license()
options(usethis.full_name = "Nicholas Horton")
usethis::use_mit_license()
usethis::use_data_raw()
getwd()
setwd("~/Dropbox/git/DiscGolf/data-raw")
source('~/Dropbox/git/DiscGolf/data-raw/DATASET.R', echo=TRUE)
usethis::use_readme_rmd()
usethis::use_git()
usethis::use_github()
library(DiscGolf)
library(DiscGolf)
gh::gh()
gh::gh("/users/elachtara/repos")
gh::gh("/users/nicholasjhorton/repos")
usethis::git_sitrep()
library(tidyr)
find("pivot_longer")
library(tidyverse)
library(mosaic)
library(valleybikeData)
october2019
names(trips)
secondary <- trips %>%
filter(end_station == NA | start_station == NA) %>%
arrange(bike) %>%
select(bike, start_time, end_time, start_station, end_station, user_id) %>%
data.frame()
secondary
tally(~ start_station, data = trips)
secondary <- trips %>%
arrange(bike) %>%
secondary <- trips %>%
filter(is.na(end_station) | is.na(start_station)) %>%
arrange(bike) %>%
select(bike, start_time, end_time, start_station, end_station, user_id) %>%
data.frame()
secondary
secondary
head(riders)
head(users)
too_many <- users %>%
trips > 1000 %>%
pull(trips)
too_many <- users %>%
trips > 1000 %>%
pull("user_id")
too_many <- users %>%
filter(trips > 1000) %>%
pull("user_id")
too_many
secondary <- trips %>%
filter(! user_id %in% too_many)
secondary <- trips %>%
filter(! user_id %in% too_many) %>%
filter(is.na(end_station) | is.na(start_station)) %>%
arrange(bike) %>%
select(bike, start_time, end_time, start_station, end_station, user_id) %>%
data.frame()
secondary
o
secondary <- trips %>%
filter(! user_id %in% too_many) %>%
filter(is.na(end_station) | is.na(start_station)) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary <- trips %>%
filter(! user_id %in% too_many) %>%
filter(is.na(end_station) | is.na(start_station)) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary <- trips %>%
filter(! user_id %in% too_many) %>%
filter(is.na(end_station) | is.na(start_station)) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
select(bike, start_time, end_time, start_station, end_station, user_id) %>%
data.frame()
secondary %>%
select(bike, max_row, start_time, end_time, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station)),
(! (is.na(end_station) & is.na(start_station))),
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
select(bike, max_row, start_time, end_time, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station)),
(! (is.na(end_station) & is.na(start_station))),
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike) %>%
secondary %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station)),
(! (is.na(end_station) & is.na(start_station))),
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike) %>%
secondary %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station)),
(! (is.na(end_station) & is.na(start_station))),
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike) %>%
secondary %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station)),
(! (is.na(end_station) & is.na(start_station))),
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary %>%
filter(max_row == 3) %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration < 120,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(max_row == 3) %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(max_row == 3) %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row)
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(max_row == 3) %>%
select(bike, max_row, duration, start_station, end_station, user_id) %>%
data.frame() %>%
head(50)
secondary %>%
filter(max_row == 3) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(max_row >= 2) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(max_row == 2) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary %>%
filter(
max_row == 2,
! is.na(start_station) & is.na(end_station)) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(
!is.na(start_station) & row == 1,
max_row >= 2
) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(
!(is.na(start_station) & row == 1),
max_row >= 2
) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(
max_row >= 2
) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
select(bike, max_row, duration, start_station, end_station, start_time, user_id) %>%
data.frame() %>%
head(50)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
mutate(start = stringr::str_sub(start_station, 1, 10),  # shorten stations
end = stringr::str_sub(end_station, 1, 10)
) %>%
select(start_station, end_station, start_time, user_id, bike, max_row, duration) %>%
data.frame() %>%
head(50)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
mutate(start = stringr::str_sub(start_station, 1, 10),  # shorten stations
end = stringr::str_sub(end_station, 1, 10)
) %>%
select(start, end, start_time, user_id, bike, max_row, duration) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(
max_row >= 2
) %>%
ungroup() %>%
arrange(bike)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
mutate(start = stringr::str_sub(start_station, 1, 10),  # shorten stations
end = stringr::str_sub(end_station, 1, 10)
) %>%
select(start, end, start_time, user_id, bike, max_row, duration) %>%
data.frame() %>%
head(50)
secondary <- trips %>%
filter(
duration > 120,
duration < 4 * 60 * 60,
(! user_id %in% too_many),
(is.na(end_station) | is.na(start_station))
) %>%
group_by(bike, user_id) %>%
mutate(
row = row_number(),
max_row = max(row),
) %>%
filter(
max_row >= 2
) %>%
ungroup() %>%
arrange(user_id, bike)
secondary %>%
filter(
max_row == 2,
! (is.na(start_station) & is.na(end_station))) %>%
mutate(start = stringr::str_sub(start_station, 1, 10),  # shorten stations
end = stringr::str_sub(end_station, 1, 10)
) %>%
select(start, end, start_time, bike, user_id, max_row, duration) %>%
data.frame() %>%
head(50)
